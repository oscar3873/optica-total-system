{% load static %}

<div class="container mt-4">

    {% include 'core/components/messages.html' %}


    <div class="col-12 h-100">
        <!-- Título del formulario wizard -->
        <div class="d-flex mb-4">
            <span class="fa-stack me-2 ms-n1">
                <i class="fas fa-circle fa-stack-2x text-300"></i>
                <i class="fa-inverse fa-stack-1x text-primary fas fa-money-check"></i>
            </span>
            <div class="col">
                {% if update %}
                    <h5 class="mb-0 text-primary position-relative"><span class="bg-200 dark__bg-1100 pe-3">Editar
                        promoción</span><span
                        class="border position-absolute top-50 translate-middle-y w-100 start-0 z-index--1"></span></h5>
                    <p class="mb-0">Aquí puede modificar el detalle completo de la promoción</p>
                {% else %}
                    <h5 class="mb-0 text-primary position-relative"><span class="bg-200 dark__bg-1100 pe-3">Nueva
                    promoción</span><span
                    class="border position-absolute top-50 translate-middle-y w-100 start-0 z-index--1"></span></h5>
                    <p class="mb-0">Aquí puede crear una nueva promoción</p>
                {% endif %}
            </div>
        </div>
    </div>


    <div class="card mb-3">
        <!-- HEADER DE LA CARD -->
        <div class="card-header bg-light pt-3 pb-2">
            <div class="row pb-md-0">
                <div class="col-12 col-sm-6">
                    <h5 class="mb-2"></h5>
                </div>
            </div>
        </div>
        <!-- BODY DE LA CARD -->
        <div class="card-body border-top">
            <div class="row">
                <div class="col-lg-12 mb-3 mb-sm-0">
                    <div class="row">
                        <form id="#" method="post">
                            {% csrf_token %}
                            

                            <div id="formset-forms">
                                <div class="visible-form" id="id_form-0">
                                    <div class="row">
                                        <div class="col-12 col-md-8 col-lg-6">
                                            <label for="{{ form.name.id_for_label }}" class="form-label">Nombre de la
                                                promoción:</label>
                                                {{form.name}}
                                            <small>El nombre de la promoción debe tener <span class="text-warning">al
                                                    menos 3
                                                    caracteres.</span></small>
                                            {% if form.name.errors %}
                                            <div class="text-danger fs--2">
                                                {{form.name.errors}}
                                            </div>
                                            {% endif %}
                                        </div>
                                        

                                        <div class="row pt-sm-3">

                                            <div class="col-12 col-md-3 pt-3 pt-sm-0">
                                                <label for="{{ form.type_discount.id_for_label }}"
                                                    class="form-label">Promoción:</label>
                                                {{form.type_discount}}
                                                <small>Selecione un <span class="text-warning">tipo de promoción.</span></small>
                                                {% if form.type_discount.errors %}
                                                <div class="text-danger fs--2">
                                                    {{form.type_discount.errors}}
                                                </div>
                                                {% endif %}
                                            </div>

                                            <div class="col-12 col-md-3 pt-3 pt-sm-0">
                                                <label for="{{ form.discount.id_for_label }}"
                                                    class="form-label" placeholder="Ej: 10">Descuento:</label>
                                                {{form.discount}}
                                                <small>Ingrese el <span class="text-warning">porcentaje de descuento.</span></small>
                                                {% if f.discount.errors %}
                                                <div class="text-danger fs--2">
                                                    {{form.discount.errors}}
                                                </div>
                                                {% endif %}
                                            </div>

                                            <div class="col-12 col-md-3 pt-3 pt-sm-0">
                                                <label for="{{form.start_date.id_for_label}}" class="form-label">Inicio:</label>
                                                {{form.start_date}}
                                                <small>Fecha de <span class="text-warning">inicio de la promoción.</span></small>
                                                {% if form.start_date.errors %}
                                                <div class="text-danger fs--2">
                                                    {{form.start_date.errors}}
                                                </div>
                                                {% endif %}
                                            </div>

                                            <div class="col-12 col-md-3 pt-3 pt-sm-0">
                                                <label for="{{form.end_date.id_for_label}}" class="form-label">Fin:</label>
                                                {{form.end_date}}
                                                <small>Fecha de <span class="text-warning">finalización de la promoción.</span></small>
                                                {% if form.end_date.errors %}
                                                <div class="text-danger fs--2">
                                                    {{form.end_date.errors}}
                                                </div>
                                                {% endif %}
                                            </div>

                                            <div class="row pt-3 pb-1">
                                                <div class="d-flex align-items-center">
                                                    <label for="{{form.is_active.id_for_label}}" class="form-label col-form-label pt-0 me-3">Promoción activa:</label>
                                                    {{form.is_active}}
                                                </div>
                                                <small>Marcar si la <span class="text-warning">promoción está activa.</span></small>
                                                {% if form.is_active.errors %}
                                                <div class="text-danger fs--2">
                                                    {{form.is_active.errors}}
                                                </div>
                                                {% endif %}
                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col-12 col-md-12 pt-3">
                                                <label for="{{form.description.id_for_label}}"
                                                    class="form-label">Descripción:</label>
                                                {{form.description}}
                                                <small><span class="text-warning"></span></small>
                                                {% if form.description.errors %}
                                                <div class="text-danger fs--2">
                                                    {{form.description.errors}}
                                                </div>
                                                {% endif %}
                                            </div>
                                        </div>


                                        <div class="row pt-5 pb-3">
                                            <div class="col-12 col-sm-6 form-group">
                                                <div class="d-flex flex-column">
                                                    <div class="input-group">
                                                        <input type="search" id="id_form-0-search-productA-input"
                                                        class="form-control form-control-sm shadow-none search"
                                                        placeholder="Buscar marca o categoría">
                                                        <div class="input-group-text bg-transparent"><span class="fa fa-search fs--1 text-600"></span></div>
                                                    </div>
                                                </div>
                                                <ul id="id_form-0-search-productA-results"
                                                class="list-group text-dark z-3 position-absolute"></ul>
                                            </div>
                                        </div>
                                        

                                    </div>
                                </div>
                            </div>
                            <!-- <button id="add-form" type="button" class="btn btn-primary">Agregar otro</button> -->
                            <button type="submit" class="btn btn-primary z-0">Cargar</button>
                            <div class="pt-4 pb-2">
                                <h5>Productos seleccionados:</h5>
                                <div id="products-selected" class="form-check d-flex flex-column update">
                                    {% for product in products_selected %}
                                        <label class="form-check-label">
                                            <input type="checkbox" name="productsSelected" value="{{ product.id }}"
                                                {% if product.id in form.productsSelected.value %}checked{% endif %}>
                                            {{ product.name }}
                                        </label>
                                    {% endfor %}
                                </div>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>

</div>





